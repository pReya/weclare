(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,n){},199:function(e,t,n){},201:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(14),c=n.n(o),l=(n(86),n(204)),s=n(206),u=n(203),i=n(22),m=(n(19),n(2)),d=n(6),E=n(10),p=n(35),f=n(36),w=n(73),b=n.n(w);function v(){return r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("footer",{className:"container"},r.a.createElement(m.C,null,r.a.createElement(m.h,null,r.a.createElement("p",{className:"font-weight-light text-muted"},"\xa9 2018 Moritz St\xfcckler \u2013 HAW Hamburg")),r.a.createElement(m.h,{className:"text-right"},r.a.createElement("a",{href:"https://github.com/pReya/weclare/"},r.a.createElement(b.a,null))))))}var h=n(202),y=n(37),x=n(38),g=n(44),C=n(39),O=n(45),S=n(25),I=n(75),N=n.n(I),T=n(76),j=n.n(T),Q=n(77),q=n.n(Q),A=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(g.a)(this,Object(C.a)(t).call(this,e))).toggleDropDown=n.toggleDropDown.bind(Object(S.a)(Object(S.a)(n))),n.state={dropdownOpen:!1},n}return Object(O.a)(t,e),Object(x.a)(t,[{key:"toggleDropDown",value:function(){var e=this.state.dropdownOpen;this.setState({dropdownOpen:!e})}},{key:"render",value:function(){var e=this.props,t=e.status,n=e.isServer,a=e.numberOfClients,o=e.ownServerId,c=this.state.dropdownOpen,l={client:["\u2328\ufe0f Ready","Trying to connect","\u2705 Connected","\u274c Error"],server:["\u2328\ufe0f Ready","\u2753 Waiting for connections","\u2705 ".concat(a," Clients Connected"),"\u274c Error"]}[n?"server":"client"][t];return r.a.createElement(m.p,{className:"justify-content-center col-md-8"},n&&[1,2,3].includes(t)?r.a.createElement(m.r,{addonType:"prepend",isOpen:c,toggle:this.toggleDropDown},r.a.createElement(m.l,{caret:!0,className:"font-weight-bold"},"".concat(o," ")),r.a.createElement(m.k,null,r.a.createElement(m.j,{header:!0},"Share"),r.a.createElement(m.j,{divider:!0}),r.a.createElement(m.j,{style:{cursor:"pointer"}},r.a.createElement(q.a,{className:"text-muted"}),"  ","Show QR Code"),document.queryCommandSupported("copy")&&r.a.createElement(m.j,{onClick:function(){var e,t;e=o,(t=document.createElement("input")).style="position: absolute; left: -1000px; top: -1000px",t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},style:{cursor:"pointer"}},r.a.createElement(j.a,{className:"text-muted"}),"  ","Copy ID"),r.a.createElement(m.j,{style:{cursor:"pointer"}},r.a.createElement(N.a,{className:"text-muted"}),"  ","Copy Link"))):null,r.a.createElement(m.o,{className:"text-center col-5",value:l,disabled:!0}))}}]),t}(r.a.Component);A.defaultProps={isServer:!1,numberOfClients:0,ownServerId:""};var k=function(e){var t=e.status,n=e.numberOfClients,a=e.isServer,o=e.isClient,c=e.ownServerId;return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.A,{expand:"sm",className:"mb-4 border-bottom shadow-sm d-flex flex-row justify-content-between"},r.a.createElement(m.i,null,r.a.createElement(m.B,{tag:h.a,to:"/"},"Weclare",a?" Server":" Client"),(a||o)&&r.a.createElement(A,{isServer:a,status:t,numberOfClients:n,ownServerId:c}),r.a.createElement(m.x,{className:"flex-row"},r.a.createElement(m.y,null,r.a.createElement(m.z,{tag:h.a,to:"/"},"Help")),r.a.createElement(m.y,null,r.a.createElement(m.z,{tag:h.a,to:"/about"},"About"))))))};k.defaultProps={isServer:!1,isClient:!1,numberOfClients:0,ownServerId:"",status:0};var D=k,_=Object(d.b)(function(e){return{status:e.connection.status,numberOfClients:e.connection.peer?Object.keys(e.connection.peer.connections).length:null,ownServerId:e.server.ownServerId}})(function(e){return r.a.createElement(D,Object.assign({isServer:!0},e))}),R=n(205),W=n(40),U=n.n(W);n(117);function F(e){var t=e.title,n=e.text,a=e.children,o=e.badge;return r.a.createElement(m.h,{md:"8"},r.a.createElement(m.c,{className:"shadow"},r.a.createElement(m.f,null,o?r.a.createElement("h6",{className:"my-0 d-flex justify-content-between"},t,r.a.createElement(m.a,{color:"dark",pill:!0},o)):r.a.createElement("h6",{className:"my-0"},t)),r.a.createElement(m.d,null,n&&r.a.createElement(m.g,null,n),a)))}F.defaultProps={text:null,children:null,badge:null};var P=F,z=function(e){var t=e.onChangeServerId,n=e.onClickConnect,a=e.serverId,o=e.title,c=e.text,l=e.buttonText,s=e.history,u=e.location;return r.a.createElement(P,{title:o,text:c},r.a.createElement(m.m,null,r.a.createElement(m.n,{row:!0,className:"form-row"},r.a.createElement(m.h,{md:6},r.a.createElement(m.o,{id:"serverId",type:"text",value:a,onChange:function(e){return t(e.target.value)}})),r.a.createElement(m.h,{md:3},r.a.createElement(m.b,{type:"button",id:"connect",className:"btn-block",onClick:function(){n(a),s&&u&&s.push(u)}},l)))))};z.defaultProps={buttonText:"Connect"};var H=z,J="ADD_CONNECTION",B="SET_SERVER_ID";var L="SET_PEER",M="SET_CONNECTION_STATUS";function X(e){return{type:M,payload:{newStatus:e}}}function V(e){return{type:L,payload:{peer:e}}}var Y=function(e,t){var n=new U.a(e,{debug:3,secure:!0});t(V(n)),n.on("open",function(){console.log("Connection Opened"),t(X(1))}),n.on("connection",function(e){e.on("data",function(e){return console.log(e)}),t(X(2)),t(function(e){return{type:J,payload:{connection:e}}}(e))}),n.on("error",function(e){console.log("FEHLER: ",e),t(X(3))})},$={title:"Create a New Server Id",text:"Please define your individual Server Id that you can give to participants.",buttonText:"Create",location:"/server/wait"},G=Object(R.a)(Object(d.b)(function(e){return{serverId:e.server.ownServerId}},function(e){return{onChangeServerId:function(t){return e({type:B,payload:{newId:t}})},onClickConnect:function(t){Y(t,e)}}})(function(e){return r.a.createElement(m.C,{className:"justify-content-center"},r.a.createElement(H,Object.assign({},e,$)))})),K=function(e){var t=e.question,n=e.selectedQuestion,a=e.onEditAnswerText,o=e.onEditQuestionText,c=e.onAddAnswer,l=e.onSetCorrectAnswer,s=e.onDeleteAnswer,u=e.onDeleteQuestion;return r.a.createElement(m.c,{className:"shadow"},r.a.createElement(m.f,null,r.a.createElement("h6",{className:"my-0"},"Edit Question")),r.a.createElement(m.d,null,null!=n?r.a.createElement(m.m,null,r.a.createElement(m.n,{row:!0,className:"form-row"},r.a.createElement(m.t,{for:"question",sm:2},"Question Text"),r.a.createElement(m.o,{id:"question",type:"text",onChange:function(e){return o(n,e.target.value)},value:t.questionText})),r.a.createElement(m.n,{row:!0,className:"form-row"},r.a.createElement(m.t,{sm:8},"Answers (Check the correct answer)"),t.answers.map(function(e,o){return r.a.createElement(Z,{isCorrectAnswer:t.correctAnswers===o,selectedQuestion:n,number:o,answer:e.answerText,key:o,onEditAnswerText:function(e){a(n,e.target.value,o)},onSetCorrectAnswer:l,onDeleteAnswer:s})}),r.a.createElement(m.b,{outline:!0,block:!0,color:"success",onClick:function(){return c(n)}},"Add answer"),r.a.createElement(m.b,{outline:!0,block:!0,color:"danger",onClick:function(){return u(n)}},"Delete Question"))):"No question selected"))};K.defaultProps={question:{},selectedQuestion:0};var Z=function(e){var t=e.answer,n=e.number,a=e.selectedQuestion,o=e.isCorrectAnswer,c=e.onEditAnswerText,l=e.onSetCorrectAnswer,s=e.onDeleteAnswer;return r.a.createElement(m.p,{className:"mb-2"},r.a.createElement(m.q,{addonType:"prepend"},r.a.createElement(m.s,null,r.a.createElement(m.o,{addon:!0,checked:o,type:"radio",name:"answer",onChange:function(){l(a,n)}}))),r.a.createElement(m.o,{value:t,onChange:c}),r.a.createElement(m.q,{addonType:"append"},r.a.createElement(m.s,null,r.a.createElement(m.b,{outline:!0,close:!0,onClick:function(){s(a,n)}}))))},ee=K,te=n(80),ne=n.n(te),ae=function(e){var t=e.questions,n=e.onSelectQuestion,a=e.selectedQuestion,o=e.onAddQuestion;return r.a.createElement(m.c,{className:"shadow"},r.a.createElement(m.f,null,r.a.createElement("h6",{className:"my-0 d-flex justify-content-between"},"Questions"," ",r.a.createElement(m.a,{color:"dark",pill:!0},t.length))),r.a.createElement(m.u,{flush:!0},t.map(function(e,t){return r.a.createElement(m.v,{key:t,tag:"a",href:"#",onClick:function(e){e.preventDefault(),n(t)},action:!0,active:a===t},r.a.createElement(m.w,{className:"mb-0"},e.questionText))}),0===t.length&&r.a.createElement(m.v,{disabled:!0},r.a.createElement(m.w,{className:"mb-0"},"No questions"))),r.a.createElement(m.e,{tag:"button",className:"cardFooterButton",onClick:function(){o()}},r.a.createElement(ne.a,{className:"text-success",style:{paddingBottom:"3px"}}),"Add"))};ae.defaultProps={questions:["No questions"],selectedQuestion:null};var re=ae,oe="SELECT_QUESTION",ce="ADD_QUESTION",le="EDIT_QUESTION_TEXT",se="DELETE_QUESTION",ue="LOAD_QUESTIONS";function ie(e){return{type:oe,payload:{questionIdx:e}}}var me="SET_CORRECT_ANSWER",de="ADD_ANSWER",Ee="EDIT_ANSWER_TEXT",pe="DELETE_ANSWER";var fe={selectQuestion:ie,addQuestion:function(){return function(e,t){e({type:ce}),e(ie(t().questionEditor.length-1))}},editQuestionText:function(e,t){return{type:le,payload:{questionIdx:e,questionText:t}}},deleteQuestion:function(e){return function(t,n){t({type:se,payload:{questionIdx:e}}),t(ie(n().selectedQuestion-1))}},addAnswer:function(e){return{type:de,payload:{questionIdx:e}}},editAnswerText:function(e,t,n){return{type:Ee,payload:{questionIdx:e,answerText:t,answerIdx:n}}},deleteAnswer:function(e,t){return{type:pe,payload:{questionIdx:e,answerIdx:t}}},setCorrectAnswer:function(e,t){return{type:me,payload:{questionIdx:e,answerIdx:t}}},loadQuestions:function(e){return{type:ue,payload:{newQuestions:e}}}},we=function(e){function t(e){var n;Object(y.a)(this,t);var a=(n=Object(g.a)(this,Object(C.a)(t).call(this,e))).props.loadQuestions,r=localStorage.getItem("weclare");return r&&a(JSON.parse(r)),n}return Object(O.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){var e=this.props,t=e.selectedQuestion,n=e.questions,a=e.history,o=(e.location,e.addQuestion),c=e.selectQuestion,l=e.editQuestionText,s=e.deleteQuestion,u=e.addAnswer,i=e.editAnswerText,d=e.deleteAnswer,E=e.setCorrectAnswer;return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.C,{className:"justify-content-center mb-4"},r.a.createElement(m.h,{md:"4"},r.a.createElement(re,{questions:n,selectedQuestion:t,onSelectQuestion:c,onAddQuestion:o})),r.a.createElement(m.h,{md:"8"},r.a.createElement(ee,{question:n[t],selectedQuestion:t,onEditQuestionText:l,onEditAnswerText:i,onAddAnswer:u,onSetCorrectAnswer:E,onDeleteAnswer:d,onDeleteQuestion:s}))),r.a.createElement(m.C,{className:"justify-content-end"},r.a.createElement(m.h,{md:"2"},r.a.createElement(m.b,{outline:!0,block:!0,onClick:function(){localStorage.setItem("weclare",JSON.stringify(n)),console.log("Saved to Storage"),a&&a.push("/server/create")},color:"success"},"Save & Continue"))))}}]),t}(r.a.Component),be=Object(R.a)(Object(d.b)(function(e){return{questions:e.questionEditor,selectedQuestion:e.selectedQuestion}},fe)(we)),ve=n(5),he={setCurrentQuestionIdx:function(e){return{type:"SET_CURRENT_QUESTION_IDX",payload:{questionIdx:e}}}},ye=Object(d.b)(function(e){return{connections:e.server.connections,questions:e.questionEditor,currentQuestionIdx:e.server.currentQuestion}},he)(function(e){var t=e.connections,n=e.questions,a=e.currentQuestionIdx,o=e.setCurrentQuestionIdx,c=t.length>0,l=a+1;return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.Helmet,null,r.a.createElement("title",null,"Waiting")),r.a.createElement(m.C,{className:"justify-content-center"},r.a.createElement(P,{title:c?"Send questions":"Waiting for participants",text:c?"Do you want to start the quiz?":"Can't start the quiz until there is at least one client connected."},c&&r.a.createElement(m.b,{outline:!0,block:!0,color:"success",onClick:function(){!function(e,t,n){console.log({connections:e,questions:t,currentQuestion:n});var a={question:Object(ve.a)({},t[n],{questionIdx:String(n)})};e.length>0&&t.length>0&&e.forEach(function(e){return e.send(JSON.stringify(a))}),console.log("TEST1")}(t,n,a),o(l)}},"Send Next Question"))))}),xe=n(13),ge=function(e,t,n){return e.map(function(e,a){return t===a?n(e):e})},Ce={questionType:"singleChoice",questionText:"New question",correctAnswers:null,answers:[{answerText:"Answer A"},{answerText:"Answer B"}]},Oe={answerText:"New answer"},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{connections:[],ownServerId:"",currentQuestion:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_QUESTION_IDX":return Object(ve.a)({},e,{currentQuestion:t.payload.questionIdx});case J:return Object(ve.a)({},e,{connections:Object(xe.a)(e.connections).concat([t.payload.connection])});case B:return Object(ve.a)({},e,{ownServerId:t.payload.newId});default:return e}},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{peer:null,status:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Object(ve.a)({},e,{status:t.payload.newStatus});case L:return Object(ve.a)({},e,{peer:t.payload.peer});default:return e}},Ne=Object(E.combineReducers)({connection:Ie,server:Se,questionEditor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:return Object(xe.a)(e).concat([Ce]);case le:var n=t.payload,a=n.questionIdx,r=n.questionText,o=e.slice();return o[a]=Object(ve.a)({},o[a],{questionText:r}),o;case se:return Object(xe.a)(e.slice(0,t.payload.questionIdx)).concat(Object(xe.a)(e.slice(t.payload.questionIdx+1)));case pe:var c=t.payload,l=c.questionIdx,s=c.answerIdx;return ge(e,l,function(e){return Object(ve.a)({},e,{answers:(t=e.answers,n=s,t.filter(function(e,t){return n!==t}))});var t,n});case de:var u=t.payload.questionIdx,i=e.slice();return i[u]=Object(ve.a)({},e[u],{answers:Object(xe.a)(e[u].answers).concat([Oe])}),i;case Ee:var m=t.payload,d=m.questionIdx,E=m.answerText,p=m.answerIdx;return ge(e,d,function(e){return Object(ve.a)({},e,{answers:ge(e.answers,p,function(e){return Object(ve.a)({},e,{answerText:E})})})});case me:var f=t.payload,w=f.questionIdx,b=f.answerIdx;return ge(e,w,function(e){return Object(ve.a)({},e,{correctAnswers:b})});case ue:return t.payload.newQuestions;default:return e}},selectedQuestion:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:return t.payload.questionIdx;default:return e}}}),Te=Object(E.createStore)(Ne,Object(f.composeWithDevTools)(Object(E.applyMiddleware)(p.a))),je=function(){return r.a.createElement("div",null,r.a.createElement(d.a,{store:Te},r.a.createElement(r.a.Fragment,null,r.a.createElement(_,null),r.a.createElement(m.i,null,r.a.createElement(u.a,{exact:!0,path:"/server/create",component:G}),r.a.createElement(u.a,{exact:!0,path:"/server/editor",component:be}),r.a.createElement(u.a,{exact:!0,path:"/server/wait",component:ye}),r.a.createElement(v,null)))))},Qe="ADD_CONNECTION",qe="SET_REMOTE_SERVER_ID",Ae="SET_CURRENT_QUESTION";var ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{connections:[],remoteServerId:"",questionIdx:null,currentQuestion:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Qe:return Object(ve.a)({},e,{connections:Object(xe.a)(e.connections).concat([t.payload.connection])});case qe:return Object(ve.a)({},e,{remoteServerId:t.payload.newId});case Ae:return Object(ve.a)({},e,{currentQuestion:t.payload.newQuestion});default:return e}},De=Object(E.combineReducers)({connection:Ie,client:ke}),_e=Object(d.b)(function(e){return{status:e.connection.status}})(function(e){return r.a.createElement(D,Object.assign({isClient:!0},e))}),Re=function(e,t){var n=new U.a({debug:3,secure:!0});t(V(n)),n.on("error",function(e){console.error(e),t(X(3))});var a=n.connect(e,{reliable:!0});t(function(e){return{type:Qe,payload:{connection:e}}}(a)),t(X(1)),a.on("open",function(){console.log("Client Connected"),t(X(2)),a.on("data",function(e){console.log("Received data: ",e);var n,a=JSON.parse(e);t((n=a.question,{type:Ae,payload:{newQuestion:n}}))})})},We={title:"Connect to Server",text:"Please enter a valid Server ID. You should receive this ID from your instructor.",buttonText:"Connect",location:"/client/answer"},Ue=Object(d.b)(function(e){return{serverId:e.client.remoteServerId}},function(e){return{onChangeServerId:function(t){return e({type:qe,payload:{newId:t}})},onClickConnect:function(t){return Re(t,e)}}})(function(e){return r.a.createElement(m.C,{className:"justify-content-center"},r.a.createElement(H,Object.assign({},e,We)))}),Fe=Object(d.b)(function(e){return{currentQuestion:e.client.currentQuestion,questionIdx:e.client.questionIdx}})(function(e){var t=e.currentQuestion;return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.Helmet,null,r.a.createElement("title",null,"Answer question")),r.a.createElement(m.C,{className:"justify-content-center"},r.a.createElement(P,{title:"Answer question",badge:t.questionIdx},r.a.createElement("h4",{className:"text-center mb-4"},t.questionText),t.answers&&t.answers.map(function(e,t){return r.a.createElement(m.b,{outline:!0,key:t,block:!0,color:"success"},e.answerText)}))))}),Pe=Object(E.createStore)(De,Object(f.composeWithDevTools)(Object(E.applyMiddleware)(p.a))),ze=function(){return r.a.createElement("div",null,r.a.createElement(d.a,{store:Pe},r.a.createElement(r.a.Fragment,null,r.a.createElement(_e,null),r.a.createElement(m.i,null,r.a.createElement(u.a,{exact:!0,path:"/client/connect",component:Ue}),r.a.createElement(u.a,{exact:!0,path:"/client/answer",component:Fe}),r.a.createElement(v,null)))))},He=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(D,null),r.a.createElement(m.i,null,r.a.createElement(m.C,null,r.a.createElement(m.h,{md:"12"},r.a.createElement(m.c,{className:"shadow"},r.a.createElement(m.f,null,r.a.createElement("h6",{className:"my-0"},"About")),r.a.createElement(m.d,null,"Text123")))),r.a.createElement(v,null)))},Je=function(e){var t=e.header,n=e.text,a=e.children,o=e.emoji;return r.a.createElement("div",null,r.a.createElement(m.c,{className:"shadow"},r.a.createElement(m.f,null,r.a.createElement("h4",{className:"my-0"},t)),r.a.createElement(m.d,null,r.a.createElement(m.g,null,r.a.createElement("span",{role:"img","aria-label":"Student",className:"d-block",style:{fontSize:"4em"}},o),r.a.createElement("span",null,n)),a)))};Je.defaultProps={header:"",text:"",children:"",emoji:""};var Be=Je,Le=function(){return r.a.createElement(m.i,null,r.a.createElement("div",{className:"pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center"},r.a.createElement("h1",{className:"display-4"},"Weclare"),r.a.createElement("p",{className:"lead"},"A web based, peer-to-peer classroom response system, tailored to computer science education at university level.")),r.a.createElement(m.C,null,r.a.createElement(m.h,{sm:"6"},r.a.createElement("div",{className:"card-deck mb-3 text-center"},r.a.createElement(Be,{header:"For Students",text:"Start the client app, which allows you to connect to an existing session and answer questions.",emoji:"\ud83d\udc69\u200d\ud83c\udf93"},r.a.createElement(m.b,{tag:h.a,to:"/client/connect",className:"btn btn-lg btn-block btn-outline-primary"},"Join Quiz")))),r.a.createElement(m.h,{sm:"6"},r.a.createElement("div",{className:"card-deck mb-3 text-center"},r.a.createElement(Be,{header:"For Instructors",text:"Start the server app, which allows you to create new question sets and accept connections from students.",emoji:"\ud83d\udc69\u200d\ud83c\udfeb"},r.a.createElement(m.b,{tag:h.a,to:"/server/editor",className:"btn btn-lg btn-block btn-outline-primary"},"Create Quiz"))))),r.a.createElement(v,null))},Me=function(){return r.a.createElement(l.a,{basename:""},r.a.createElement("div",{className:"App"},r.a.createElement(i.Helmet,{titleTemplate:"Weclare | %s",defaultTitle:"Weclare \u2013 A web based classroom response system"}),r.a.createElement(s.a,null,r.a.createElement(u.a,{path:"/",exact:!0,component:Le}),r.a.createElement(u.a,{path:"/server",component:je}),r.a.createElement(u.a,{path:"/client",component:ze}),r.a.createElement(u.a,{path:"/about",component:He}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(199);c.a.render(r.a.createElement(Me,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},81:function(e,t,n){e.exports=n(201)},86:function(e,t,n){}},[[81,2,1]]]);
//# sourceMappingURL=main.9775834a.chunk.js.map