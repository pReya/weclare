(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=112},192:function(e,t,n){},521:function(e,t,n){},523:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"REGISTER_ANSWERS",function(){return Ae}),n.d(a,"registerAnswers",function(){return Ne}),n.d(a,"INIT_ANSWERS",function(){return je}),n.d(a,"initAnswers",function(){return Te});var r={};n.r(r),n.d(r,"SELECT_QUESTION",function(){return Kt}),n.d(r,"selectQuestion",function(){return Zt}),n.d(r,"ADD_QUESTION",function(){return en}),n.d(r,"addQuestion",function(){return tn}),n.d(r,"EDIT_QUESTION_TEXT",function(){return nn}),n.d(r,"editQuestionText",function(){return an}),n.d(r,"EDIT_QUESTION_MODE",function(){return rn}),n.d(r,"editQuestionMode",function(){return on}),n.d(r,"EDIT_QUESTION_TYPE",function(){return sn}),n.d(r,"editQuestionType",function(){return cn}),n.d(r,"DELETE_QUESTION",function(){return ln}),n.d(r,"deleteQuestion",function(){return un}),n.d(r,"LOAD_QUESTIONS",function(){return dn}),n.d(r,"loadQuestions",function(){return mn}),n.d(r,"loadQuestionsFromStorage",function(){return pn}),n.d(r,"validateAndSaveToStorage",function(){return fn}),n.d(r,"saveFileToStorage",function(){return En}),n.d(r,"SORT_QUESTION",function(){return vn}),n.d(r,"sortQuestion",function(){return hn}),n.d(r,"SET_CORRECT_SINGLE_ANSWER",function(){return gn}),n.d(r,"setCorrectSingleAnswer",function(){return bn}),n.d(r,"SET_CORRECT_MULTI_ANSWER",function(){return yn}),n.d(r,"setCorrectMultiAnswer",function(){return wn}),n.d(r,"ADD_ANSWER",function(){return Sn}),n.d(r,"addAnswer",function(){return xn}),n.d(r,"EDIT_ANSWER_TEXT",function(){return On}),n.d(r,"editAnswerText",function(){return In}),n.d(r,"DELETE_ANSWER",function(){return Cn}),n.d(r,"deleteAnswer",function(){return An}),n.d(r,"SORT_ANSWER",function(){return Nn}),n.d(r,"sortAnswer",function(){return jn});var o=n(0),s=n.n(o),i=n(21),c=n.n(i),l=n(560),u=n(563),d=n(558),m=n(34),p=n(535),f=n(12),E=n(16),v=n(55),h=n(56),g=n(138),b=n.n(g),y=n(524),w=n(525),S=function(){return s.a.createElement("div",null,s.a.createElement("hr",null),s.a.createElement("footer",{className:"container"},s.a.createElement(y.a,null,s.a.createElement(w.a,null,s.a.createElement("a",{className:"font-weight-light text-muted",href:"/about"},"\xa9 2018 Moritz St\xfcckler \u2013 HAW Hamburg")),s.a.createElement(w.a,{className:"text-right"},s.a.createElement("a",{href:"https://github.com/pReya/weclare/"},s.a.createElement(b.a,null))))))},x=n(538),O=n(534),I=n(536),C=n(537),A=n(9),N=n(8),j=n(14),T=n(13),k=n(15),Q=n(19),q=n(526),_=n(527),R=n(528),D=n(529),P=n(530),M=n(561),F=n(531),W=n(532),J=n(533),U=n(140),H=n.n(U),B=n(141),z=n.n(B),L=n(142),G=n.n(L),V=n(143),X=n.n(V),Y=function(e){var t=document.createElement("input");t.style="position: absolute; left: -1000px; top: -1000px",t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},$=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(j.a)(this,Object(T.a)(t).call(this,e))).toggleDropdown=n.toggleDropdown.bind(Object(Q.a)(Object(Q.a)(n))),n.toggleModal=n.toggleModal.bind(Object(Q.a)(Object(Q.a)(n))),n.state={dropdownOpen:!1,showModal:!1},n}return Object(k.a)(t,e),Object(N.a)(t,[{key:"toggleDropdown",value:function(){this.setState(function(e){return{dropdownOpen:!e.dropdownOpen}})}},{key:"toggleModal",value:function(){this.setState(function(e){return{showModal:!e.showModal}})}},{key:"render",value:function(){var e=this.props,t=e.status,n=e.isServer,a=e.numberOfClients,r=e.ownServerId,o=this.state,i=o.dropdownOpen,c=o.showModal,l={client:["\u2328\ufe0f Ready","Trying to connect","\u2705 Connected","\u274c Error"],server:["\u2328\ufe0f Ready","\u2753 Waiting for connections","\u2705 ".concat(a," Clients Connected"),"\u274c Error"]}[n?"server":"client"][t];return s.a.createElement(q.a,{className:"justify-content-center col-md-8"},n&&[1,2,3].includes(t)?s.a.createElement(_.a,{addonType:"prepend",isOpen:i,toggle:this.toggleDropdown},s.a.createElement(R.a,{caret:!0,className:"font-weight-bold"},"".concat(r," ")),s.a.createElement(D.a,null,s.a.createElement(P.a,{header:!0},"Share with client"),s.a.createElement(P.a,{divider:!0}),s.a.createElement(P.a,{style:{cursor:"pointer"},onClick:this.toggleModal},s.a.createElement(G.a,{className:"text-muted"}),"  ","Show QR Code"),s.a.createElement(M.a,{isOpen:c,toggle:this.toggleModal,size:"lg"},s.a.createElement(F.a,{toggle:this.toggleModal},"Share QR Code"),s.a.createElement(W.a,null,s.a.createElement(X.a,{value:"".concat(window.location.origin,"/client/connect/").concat(r),style:{width:"100%",height:"100%"},renderAs:"svg"}))),document.queryCommandSupported("copy")&&s.a.createElement(P.a,{onClick:function(){Y(r)},style:{cursor:"pointer"}},s.a.createElement(z.a,{className:"text-muted"}),"  ","Copy ID"),s.a.createElement(P.a,{style:{cursor:"pointer"},onClick:function(){Y(encodeURI("".concat(window.location.origin,"/client/connect/").concat(r)))}},s.a.createElement(H.a,{className:"text-muted"}),"  ","Copy Link"))):null,s.a.createElement(J.a,{className:"text-center col-5",value:l,disabled:!0}))}}]),t}(s.a.Component);$.defaultProps={isServer:!1,numberOfClients:0,ownServerId:""};var K=function(e){var t=e.status,n=e.numberOfClients,a=e.isServer,r=e.isClient,o=e.ownServerId;return s.a.createElement(s.a.Fragment,null,s.a.createElement(O.a,{expand:"sm",className:"mb-4 border-bottom shadow-none d-flex flex-row justify-content-between bg-white py-3"},s.a.createElement(p.a,null,s.a.createElement(I.a,{className:"w-50",href:"/"},"Weclare",a?" Server":" Client"),(a||r)&&s.a.createElement($,{isServer:a,status:t,numberOfClients:n,ownServerId:o}),s.a.createElement(C.a,{className:"w-50 text-right",tag:x.a,to:"/about"},"About"))))};K.defaultProps={isServer:!1,isClient:!1,numberOfClients:0,ownServerId:"",status:0};var Z=K,ee=Object(f.b)(function(e){return{status:e.connection.status,numberOfClients:e.connection.peer?Object.keys(e.connection.peer.connections).length:null,ownServerId:e.server.ownServerId}})(function(e){return s.a.createElement(Z,Object.assign({isServer:!0},e))}),te=n(562),ne=n(7),ae=n(545),re=n(546),oe=n(547),se=n(548),ie=n(100),ce=n(549),le=(n(111),n(539)),ue=n(540),de=n(541),me=n(542),pe=n(543),fe=n(544);function Ee(e){var t=e.title,n=e.text,a=e.children,r=e.badge,o=e.footer;return s.a.createElement(w.a,{md:"8"},s.a.createElement(le.a,{className:"shadow-none"},s.a.createElement(ue.a,null,r?s.a.createElement("h6",{className:"my-0 d-flex justify-content-between"},t,s.a.createElement(de.a,{color:"dark",pill:!0},r)):s.a.createElement("h6",{className:"my-0"},t)),s.a.createElement(me.a,null,n&&s.a.createElement(pe.a,null,n),a),o&&s.a.createElement(fe.a,null,o)))}Ee.defaultProps={text:null,children:null,badge:null,footer:null};var ve=Ee,he=function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(j.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={inputIsInvalid:!1,isWaitingForServer:!1},n.setWaitingForServer=function(){n.setState(function(e){return Object(ne.a)({},e,{isWaitingForServer:!0})})},n.validateServerId=function(e){var t=!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e);n.setState(function(e){return Object(ne.a)({},e,{inputIsInvalid:!t})})},n}return Object(k.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.match,a=t.onChangeServerId,r=t.onClickConnect,o=t.serverId,i=t.title,c=t.text,l=t.buttonText,u=t.history,d=t.location,m=t.helpText,p=t.validationError,f=t.connectionStatus,E=this.state,v=E.inputIsInvalid,h=E.isWaitingForServer;return u&&d&&1===f&&u.push(d),n&&n.params&&n.params.serverId&&a(n.params.serverId),s.a.createElement(ve,{title:i,text:c},s.a.createElement(ae.a,null,s.a.createElement(re.a,{row:!0,className:"form-row mb-1"},s.a.createElement(w.a,null,s.a.createElement(J.a,{bsSize:"lg",id:"serverId",type:"text",value:o,disabled:h,invalid:v,onChange:function(t){var n=t.target.value;e.validateServerId(n),a(n)}}),p&&s.a.createElement(oe.a,null,p),m&&s.a.createElement(se.a,null,m)),s.a.createElement(w.a,{md:3},s.a.createElement(ie.a,{type:"button",id:"connect",className:"btn-block",size:"lg",disabled:h||v,onClick:function(){r(o),e.setWaitingForServer()}},h?s.a.createElement(s.a.Fragment,null,s.a.createElement(ce.a,{size:"sm",color:"info"})," Waiting..."):l)))))}}]),t}(s.a.Component);he.defaultProps={helpText:void 0,match:void 0,buttonText:"Connect",validationError:void 0,inputIsInvalid:!1};var ge=he,be=n(24),ye=n.n(be),we=n(35),Se=function(){function e(){Object(A.a)(this,e)}return Object(N.a)(e,null,[{key:"info",value:function(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];e.emitMessage("info",t,a)}},{key:"error",value:function(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];e.emitMessage("error",t,a)}},{key:"warn",value:function(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];e.emitMessage("warn",t,a)}},{key:"debug",value:function(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];e.emitMessage("debug",t,a)}},{key:"emitMessage",value:function(e,t,n){n.length>0?console[e](t,n):console[e](t)}}]),e}(),xe="SET_PEER",Oe="SET_CONNECTION_STATUS";function Ie(e){return{type:Oe,payload:{newStatus:e}}}function Ce(e){return{type:xe,payload:{peer:e}}}var Ae="REGISTER_ANSWERS";function Ne(e,t,n){return function(a,r){r().server.acceptingAnswers&&a({type:Ae,payload:{questionIdx:e,answerIdxArray:t,userId:n}})}}var je="INIT_ANSWERS";function Te(){return function(e,t){var n=t().questionEditor.map(function(e){return e.answers.map(function(){return[]})});e({type:je,payload:{array:n}})}}var ke=n(168),Qe=function(e){var t=e.questionEditor,n=e.server.currentQuestionIdx,a=function(e){var t=e.questionEditor,n=e.server.currentQuestionIdx;return t.length>0&&"number"===typeof n?"".concat(n+1,"/").concat(t.length):"0/0"}(e);if(t.length>0&&"number"===typeof n)return Object(ne.a)({},t[n],{progress:a})},qe=function(e){var t=Qe(e);return Object(ne.a)({},t,{answers:t.answers.map(function(e){e.isCorrect;return Object(ke.a)(e,["isCorrect"])})})},_e=n(144),Re=n.n(_e),De=function(e){var t=Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_PEERJS_SERVER:"peerjs-server-mvmastudcl.now.sh",REACT_APP_PEERJS_SECURE:"true",REACT_APP_PEERJS_DEBUG:"2",REACT_APP_DROPBOX_APP_KEY:"d18bw92f2af5ssh"}),n=t.REACT_APP_PEERJS_SERVER,a=t.REACT_APP_PEERJS_SECURE,r=t.REACT_APP_PEERJS_DEBUG;return new Re.a(e,{host:n,secure:"true"===a,debug:parseInt(r,10)})},Pe="ADD_CONNECTION";function Me(e){return{type:Pe,payload:{connection:e}}}var Fe="SET_SERVER_ID";function We(e){return{type:Fe,payload:{newId:e}}}var Je="SET_CURRENT_QUESTION_IDX";function Ue(e){return{type:Je,payload:{questionIdx:e}}}function He(){return function(e,t){var n=t().server.currentQuestionIdx;e(Ue((void 0===n?0:n)+1))}}var Be="TOGGLE_ACCEPTING_ANSWERS";var ze="TOGGLE_ACCEPTING_CONNECTIONS";var Le={title:"Choose a Server ID",text:"Please pick a server ID that uniquely identifies your quiz session (e.g. 'algorithms_2_2018') or leave it empty to generate a random ID.",buttonText:"Create",location:"/server/ask",validationError:"Only alphanumeric characters and '-','_' or spaces are allowed."},Ge=Object(te.a)(Object(f.b)(function(e){return{serverId:e.server.ownServerId,connectionStatus:e.connection.status}},function(e){return{onChangeServerId:function(t){return e(We(t))},onClickConnect:function(){e(function(){var e=Object(we.a)(ye.a.mark(function e(t,n){var a,r,o,s,i,c,l;return ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(){return(i=Object(we.a)(ye.a.mark(function e(t){return ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){t.on("open",function(t){Se.info('Successfully created peer with ID "'.concat(t,'"')),e(t)}),t.on("error",function(e){return n(e)})}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)},s=function(e){return i.apply(this,arguments)},a=n(),r=a.server.ownServerId,o=De(void 0===r?null:r),c=function(e){var n=e.type,a=e.payload;switch(Se.info("Received Data: ",e),n){case"answer":t(Ne(a.questionIdx,a.answerIdxArray,a.userId));break;default:Se.error("Switch case default reached")}},t(Ce(o)),e.next=8,s(o);case 8:l=e.sent,t(Ie(1)),t(We(l)),o.on("connection",function(e){Se.info("New client connected with id: ",e.peer),e.on("data",function(e){return c(e)}),t(Ie(2)),t(Me(e))}),o.on("error",function(e){Se.error("ERROR: ",e),t(Ie(3))});case 13:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}())}}})(function(e){return s.a.createElement(y.a,{className:"justify-content-center"},s.a.createElement(ge,Object.assign({},e,Le)))})),Ve=n(147),Xe=n.n(Ve),Ye=n(29),$e=n(148),Ke=n.n($e),Ze=n(61),et=n.n(Ze),tt=n(552),nt=n(553),at=n(149),rt=n.n(at),ot=n(559),st=n(550);var it=function(e){var t=e.id,n=e.text,a=e.placement;return s.a.createElement(s.a.Fragment,null,s.a.createElement(rt.a,{style:{marginRight:"10px"},size:20,color:"#8a817c",id:t}),s.a.createElement(ot.a,{placement:a,target:t,trigger:"hover"},s.a.createElement(st.a,null,n)))},ct=n(551),lt=n(189),ut=n(62),dt=n.n(ut),mt=n(150),pt=n.n(mt),ft=function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(j.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={isHovered:!1},n}return Object(k.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.answer,a=t.number,r=t.mode,o=t.selectedQuestion,i=t.isCorrectAnswer,c=t.onEditAnswerText,l=t.onSetCorrectSingleAnswer,u=t.onSetCorrectMultiAnswer,d=t.onDeleteAnswer,m=t.dragHandleProps,p=t.disabled,f=this.state.isHovered,E={isCorrectAnswer:i,selectedQuestion:o,number:a,disabled:p};return s.a.createElement(s.a.Fragment,null,s.a.createElement("span",Object.assign({className:"invisible"},m)),s.a.createElement(q.a,{className:"mb-2",onMouseEnter:function(){return e.setState({isHovered:!0})},onMouseLeave:function(){return e.setState({isHovered:!1})}},s.a.createElement(ct.a,{addonType:"prepend"},s.a.createElement(lt.a,null,"single"===r?s.a.createElement(Et,Object.assign({},E,{onSetCorrectAnswer:function(){l(o,a)}})):s.a.createElement(vt,Object.assign({},E,{onSetCorrectAnswer:function(){u(o,a)}})))),s.a.createElement(J.a,{value:n,onChange:c}),f&&s.a.createElement(ct.a,{addonType:"append"},s.a.createElement(lt.a,{className:"pointerCursor"},s.a.createElement(pt.a,null)),s.a.createElement(lt.a,{className:"pointerCursor",onClick:function(){d(o,a)}},s.a.createElement(et.a,null)),s.a.createElement(lt.a,Object.assign({className:"pointerCursor"},m),s.a.createElement(dt.a,null)))))}}]),t}(s.a.Component),Et=function(e){var t=e.isCorrectAnswer,n=(e.number,e.onSetCorrectAnswer),a=e.disabled;return s.a.createElement(J.a,{addon:!0,checked:t,type:"radio",name:"answer",onChange:n,disabled:a})};Et.defaultProps={disabled:!1};var vt=function(e){var t=e.isCorrectAnswer,n=e.number,a=e.onSetCorrectAnswer,r=e.disabled;return s.a.createElement(J.a,{addon:!0,checked:t,type:"checkbox",name:"answer-".concat(n),onChange:a,disabled:r})};vt.defaultProps={disabled:!1};n(190),n(192),n(194);var ht=n(151),gt=n.n(ht),bt=n(88),yt=n.n(bt),wt=function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(j.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).formats=["bold","italic","underline","code-block","code","list","link"],n.modules={toolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"],["code-block"],["clean"]],syntax:{highlight:function(e){return gt.a.highlightAuto(e).value}}},n.handleChange=function(e){var t=n.props;(0,t.onEditQuestionText)(t.selectedQuestion,e)},n}return Object(k.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props.content;return s.a.createElement(yt.a,{className:"mb-4",id:"question",value:e,formats:this.formats,modules:this.modules,onChange:this.handleChange})}}]),t}(s.a.Component),St=function(e){var t=e.question,n=e.selectedQuestion,a=e.onEditAnswerText,r=e.onEditQuestionText,o=e.onEditQuestionMode,i=e.onEditQuestionType,c=e.onAddAnswer,l=e.onSortAnswer,u=e.onSetCorrectSingleAnswer,d=e.onSetCorrectMultiAnswer,m=e.onDeleteAnswer,p=e.onDeleteQuestion;return s.a.createElement(le.a,{className:"shadow-none"},s.a.createElement(ue.a,null,s.a.createElement("h5",{className:"my-0"},"Edit Question")),s.a.createElement(me.a,null,null!=n?s.a.createElement(ae.a,null,s.a.createElement(re.a,null,s.a.createElement(y.a,{form:!0,className:"justify-content-between"},s.a.createElement(tt.a,{sm:"auto",className:"font-weight-bold"},"Question Text"),s.a.createElement(w.a,{sm:"auto"},s.a.createElement(it,{text:s.a.createElement(s.a.Fragment,null,"A ",s.a.createElement("strong",null,"question")," does have a set of correct answers. A ",s.a.createElement("strong",null,"vote")," does not have any correct answers. It will just show the distribution of all given answers."),id:"info-question-type",placement:"left"}),s.a.createElement(nt.a,{size:"sm"},s.a.createElement(ie.a,{outline:!0,color:"primary",active:"question"===t.type,onClick:function(){"question"!==t.type&&i(n,"question","vote")}},"Question"),s.a.createElement(ie.a,{outline:!0,color:"primary",active:"vote"===t.type,onClick:function(){"vote"!==t.type&&i(n,"vote","question")}},"Vote")))),s.a.createElement(y.a,{form:!0},s.a.createElement(w.a,null,s.a.createElement(wt,{content:t.text,onEditQuestionText:r,selectedQuestion:n})))),s.a.createElement(re.a,null,s.a.createElement(y.a,{form:!0,className:"justify-content-between"},s.a.createElement(tt.a,{sm:"auto"},s.a.createElement("span",{className:"font-weight-bold"},"Answers "),s.a.createElement("span",{className:"small text-muted"},"multi"===t.mode?"(Check the correct answers)":"(Select the correct answer)")),s.a.createElement(w.a,{sm:"auto"},s.a.createElement(it,{text:s.a.createElement(s.a.Fragment,null,"Choose if you want to allow users to pick just a"," ",s.a.createElement("strong",null,"single")," or ",s.a.createElement("strong",null,"multiple")," ","answers."),id:"info-question-mode",placement:"left"}),s.a.createElement(nt.a,{size:"sm"},s.a.createElement(ie.a,{outline:!0,color:"primary",onClick:function(){"single"!==t.mode&&o(n,"single","multi")},active:"single"===t.mode},"Single"),s.a.createElement(ie.a,{outline:!0,color:"primary",onClick:function(){"multi"!==t.mode&&o(n,"multi","single")},active:"multi"===t.mode},"Multiple")))),s.a.createElement(y.a,{form:!0},s.a.createElement(w.a,null,s.a.createElement(Ye.a,{onDragEnd:function(e){var t=e.destination,a=e.source;t&&(t.droppableId===a.droppableId&&t.index===a.inde||l(n,a.index,t.index))}},s.a.createElement(Ye.c,{droppableId:"answerList"},function(e){return s.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef}),t.answers.map(function(e,r){return s.a.createElement(Ye.b,{draggableId:e.id,index:r,key:e.id},function(o){return s.a.createElement("div",Object.assign({},o.draggableProps,{ref:o.innerRef,key:e.id}),s.a.createElement(ft,{isCorrectAnswer:e.isCorrect,dragHandleProps:o.dragHandleProps,selectedQuestion:n,number:r,mode:t.mode,answer:e.text,key:e.id,onEditAnswerText:function(e){return a(n,e.target.value,r)},onSetCorrectSingleAnswer:u,onSetCorrectMultiAnswer:d,onDeleteAnswer:m,disabled:"vote"===t.type}))})}),e.placeholder)}))))),s.a.createElement(ie.a,{outline:!0,block:!0,color:"primary",onClick:function(){return c(n)}},s.a.createElement(Ke.a,null)," Add answer"),s.a.createElement(ie.a,{outline:!0,block:!0,color:"danger",onClick:function(){return p(n)}},s.a.createElement(et.a,null)," Delete Question")):s.a.createElement("span",{className:"text-muted"},"No question selected")))};St.defaultProps={question:{},selectedQuestion:0};var xt=St,Ot=n(155),It=n.n(Ot),Ct=n(156),At=n.n(Ct),Nt=n(555),jt=n(556),Tt=n(557),kt=n(157),Qt=n.n(kt),qt=n(158),_t=n.n(qt),Rt=n(159),Dt=n.n(Rt),Pt=n(554),Mt=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(j.a)(this,Object(T.a)(t).call(this,e))).handleSubmit=function(e){var t=n.props,a=t.onSelectFile,r=t.closeDropdown;e.preventDefault(),a(n.fileInput.current.files[0]),"function"===typeof r&&r()},n.fileInput=s.a.createRef(),n}return Object(k.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this,t=this.props.children;return s.a.createElement(s.a.Fragment,null,s.a.createElement("input",{type:"file",ref:this.fileInput,style:{display:"none"},onChange:this.handleSubmit}),s.a.cloneElement(t,{onClick:function(t){t.preventDefault(),e.fileInput.current.click()}}))}}]),t}(s.a.Component);Mt.defaultProps={closeDropdown:null};var Ft=Mt,Wt=n(160),Jt=n.n(Wt),Ut=!1,Ht=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(j.a)(this,Object(T.a)(t).call(this,e))).onChoose=n.onChoose.bind(Object(Q.a)(Object(Q.a)(n))),n}return Object(k.a)(t,e),Object(N.a)(t,null,[{key:"isDropboxReady",value:function(){return!!window.Dropbox}}]),Object(N.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.appKey;t.isDropboxReady()||Ut||(Ut=!0,Jt()("https://www.dropbox.com/static/api/2/dropins.js",{attrs:{id:"dropboxjs","data-app-key":e}}))}},{key:"onChoose",value:function(){var e=this.props,n=e.success,a=e.cancel,r=e.linkType,o=e.multiselect,s=e.extensions,i=e.disabled;return!t.isDropboxReady()||i?null:window.Dropbox.choose({success:n,cancel:a,linkType:r,multiselect:o,extensions:s})}},{key:"render",value:function(){var e=this.props.children;return s.a.createElement("div",{onClick:this.onChoose},e||s.a.createElement("button",{type:"button"},"Open Dropbox Chooser"))}}]),t}(o.Component);Ht.defaultProps={cancel:function(){},linkType:"preview",multiselect:!1,disabled:!1};var Bt=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(j.a)(this,Object(T.a)(t).call(this,e))).toggle=n.toggle.bind(Object(Q.a)(Object(Q.a)(n))),n.state={dropdownOpen:!1},n}return Object(k.a)(t,e),Object(N.a)(t,[{key:"toggle",value:function(){this.setState(function(e){return{dropdownOpen:!e.dropdownOpen}})}},{key:"render",value:function(){var e=this.state.dropdownOpen,t=this.props,n=t.onUploadFile,a=t.onUploadDropbox;return s.a.createElement(Pt.a,{isOpen:e,toggle:this.toggle},s.a.createElement(R.a,{color:"light",caret:!0},s.a.createElement(Qt.a,{className:"text-secondary"})," Import"," "),s.a.createElement(D.a,null,s.a.createElement(Ft,{onSelectFile:function(e){return n(e)},closeDropdown:this.toggle},s.a.createElement(P.a,{toggle:!1},s.a.createElement(_t.a,{className:"text-secondary"})," File")),s.a.createElement(P.a,null,s.a.createElement(Ht,{appKey:"d18bw92f2af5ssh",linkType:"direct",success:function(e){fetch(e[0].link).then(function(e){return e.text()}).then(function(e){return a(e)})}},s.a.createElement(Dt.a,{className:"text-secondary"})," Dropbox"))))}}]),t}(s.a.Component),zt=function(e){var t=e.questions,n=e.onSelectQuestion,a=e.onSortQuestion,r=e.selectedQuestion,o=e.onAddQuestion,i=e.onDownloadFile,c=e.onUploadFile,l=e.onUploadDropbox;return s.a.createElement(le.a,{className:"shadow-none"},s.a.createElement(ue.a,null,s.a.createElement("h5",{className:"my-0 d-flex justify-content-between"},"Questions",s.a.createElement(de.a,{color:"dark",pill:!0},t.length))),s.a.createElement(Ye.a,{onDragEnd:function(e){var t=e.destination,n=e.source;t&&(t.droppableId===n.droppableId&&t.index===n.inde||a(n.index,t.index))}},s.a.createElement(Ye.c,{droppableId:"questionList"},function(e){return s.a.createElement(Nt.a,{flush:!0},s.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef}),t.map(function(e,t){return s.a.createElement(Ye.b,{draggableId:e.id,index:t,key:e.id},function(a){return s.a.createElement("div",Object.assign({},a.draggableProps,{ref:a.innerRef,key:e.id}),s.a.createElement(jt.a,{key:e.id,tag:"a",href:"#",onClick:function(e){e.preventDefault(),n(t)},action:!0,active:r===t,className:"d-flex justify-content-between align-items-center hover-container"},function(e,t,n){var a=e.trim().split(" ");return a.length>t?a.slice(0,t).join(" ")+(n||""):e}((o=e.text,(new DOMParser).parseFromString(o,"text/html").body.textContent||""),7,"..."),s.a.createElement("div",Object.assign({className:"hover-hide"},a.dragHandleProps),s.a.createElement(dt.a,{style:{marginBottom:"3px",marginRight:"-6px"}}))));var o})}),e.placeholder),0===t.length&&s.a.createElement(jt.a,{disabled:!0},s.a.createElement(Tt.a,{className:"mb-0"},"No questions")))})),s.a.createElement(fe.a,{tag:"button",className:"cardFooterButton btn btn-light",onClick:function(){o()}},s.a.createElement(It.a,{className:"text-success",style:{paddingBottom:"3px"}}),"Add Question"),s.a.createElement(fe.a,null,s.a.createElement("div",{className:"text-center"},s.a.createElement(Bt,{onUploadFile:c,onUploadDropbox:l}),s.a.createElement(ie.a,{color:"light",onClick:i},s.a.createElement(At.a,{className:"text-secondary"})," Export"))))};zt.defaultProps={questions:[],selectedQuestion:null};var Lt=zt,Gt=n(78),Vt=n.n(Gt),Xt={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://www.weclare.de/questions.json",type:"array",title:"A question set for weclare.de",items:{type:"object",title:"A single questions",required:["id","type","text","answers","questionIdx"],properties:{id:{type:"string",title:"A unique id"},type:{type:"string",title:"Type of question (e.g. single, multi, text)"},questionIdx:{type:"number",title:"Question Index"},mode:{type:"string",title:"Mode of question (e.g. a vote or question)"},text:{type:"string",title:"The question text"},answers:{type:"array",title:"All answer options for this question",items:{type:"object",title:"A single answer",required:["id","text","isCorrect"],properties:{id:{type:"string",title:"A unique id"},text:{type:"string",title:"The text of the answer"},isCorrect:{type:"boolean",title:"Flag if the answer is correct"}},additionalProperties:!1}}},additionalProperties:!1}},Yt=function(e){var t="data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(e))),n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download","weclare-".concat(function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,a=e.getFullYear();return t<10&&(t="0".concat(t)),n<10&&(n="0".concat(n)),"".concat(t,"-").concat(n,"-").concat(a)}(),".json")),document.body.appendChild(n),n.click(),n.remove(),Se.info("Created and started file download")},$t=function(e){localStorage.setItem("weclare",e),Se.info("Saved questionset to local storage")},Kt="SELECT_QUESTION";function Zt(e){return{type:Kt,payload:{questionIdx:e}}}var en="ADD_QUESTION";function tn(){return function(e,t){e({type:en}),e(Zt(t().questionEditor.length-1))}}var nn="EDIT_QUESTION_TEXT";function an(e,t){return{type:nn,payload:{questionIdx:e,text:t}}}var rn="EDIT_QUESTION_MODE";function on(e,t,n){return{type:rn,payload:{questionIdx:e,newMode:t,oldMode:n}}}var sn="EDIT_QUESTION_TYPE";function cn(e,t,n){return{type:sn,payload:{questionIdx:e,newType:t,oldType:n}}}var ln="DELETE_QUESTION";function un(e){return function(t,n){t({type:ln,payload:{questionIdx:e}});var a=n().questionEditor;0===e?a.length>0?t(Zt(0)):t(Zt(null)):t(Zt(e-1))}}var dn="LOAD_QUESTIONS";function mn(e){return{type:dn,payload:{newQuestions:e}}}var pn=function(){return function(e){var t=localStorage.getItem("weclare");t&&e(mn(JSON.parse(t)))}},fn=function(e){return function(t){Vt.a.validate(JSON.parse(e),Xt)?(Se.info("Questionset was successfully validated"),$t(e),t(pn())):Se.error("Imported file was invalid",Vt.a.error)}},En=function(e){return function(t){var n=new FileReader;n.onload=function(){t(fn(n.result))},n.readAsText(e)}},vn="SORT_QUESTION";function hn(e,t){return function(n,a){n({type:vn,payload:{oldQuestionIdx:e,newQuestionIdx:t}}),a().selectedQuestion===e&&n(Zt(t))}}var gn="SET_CORRECT_SINGLE_ANSWER";function bn(e,t){return{type:gn,payload:{questionIdx:e,answerIdx:t}}}var yn="SET_CORRECT_MULTI_ANSWER";function wn(e,t){return{type:yn,payload:{questionIdx:e,answerIdx:t}}}var Sn="ADD_ANSWER";function xn(e){return{type:Sn,payload:{questionIdx:e}}}var On="EDIT_ANSWER_TEXT";function In(e,t,n){return{type:On,payload:{questionIdx:e,text:t,answerIdx:n}}}var Cn="DELETE_ANSWER";function An(e,t){return{type:Cn,payload:{questionIdx:e,answerIdx:t}}}var Nn="SORT_ANSWER";function jn(e,t,n){return{type:Nn,payload:{questionIdx:e,oldAnswerIdx:t,newAnswerIdx:n}}}var Tn=n(1),kn=n.n(Tn),Qn=(kn.a.string,kn.a.shape({question:kn.a.shape({questionIdx:kn.a.number,text:kn.a.string,type:kn.a.string,answers:kn.a.arrayOf(kn.a.object)})}),{progress:"0/0",questionIdx:0,text:"Mock question: How is the development going?",type:"single",mode:"question",answers:[{id:"6FedDc",text:"Good",isCorrect:!0},{id:"9FbdDa",text:"Not Good",isCorrect:!1}]}),qn=Object(ne.a)({},r,a),_n=function(e){function t(e){var n;return Object(A.a)(this,t),n=Object(j.a)(this,Object(T.a)(t).call(this,e)),e.loadQuestionsFromStorage(),n}return Object(k.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props,t=e.selectedQuestion,n=e.questions,a=e.history,r=e.addQuestion,o=e.selectQuestion,i=e.editQuestionText,c=e.editQuestionType,l=e.editQuestionMode,u=e.deleteQuestion,d=e.addAnswer,m=e.editAnswerText,p=e.deleteAnswer,f=e.setCorrectSingleAnswer,E=e.setCorrectMultiAnswer,v=e.initAnswers,h=e.sortQuestion,g=e.sortAnswer,b=e.saveFileToStorage,S=e.validateAndSaveToStorage;return s.a.createElement(s.a.Fragment,null,s.a.createElement(y.a,{className:"justify-content-center mb-4"},s.a.createElement(w.a,{md:"4"},s.a.createElement(Lt,{questions:n,selectedQuestion:t,onSelectQuestion:o,onAddQuestion:r,onSortQuestion:h,onDownloadFile:function(){$t(JSON.stringify(n)),Yt(n)},onUploadFile:b,onUploadDropbox:S})),s.a.createElement(w.a,{md:"8"},s.a.createElement(xt,{question:n[t],selectedQuestion:t,onEditQuestionText:i,onEditQuestionMode:l,onEditQuestionType:c,onEditAnswerText:m,onAddAnswer:d,onSetCorrectSingleAnswer:f,onSetCorrectMultiAnswer:E,onSortAnswer:g,onDeleteAnswer:p,onDeleteQuestion:u}))),s.a.createElement(y.a,{className:"justify-content-end"},s.a.createElement(w.a,{xs:"auto"},s.a.createElement(ie.a,{outline:!0,block:!0,onClick:function(){v(),$t(JSON.stringify(n)),a&&a.push("/server/create")},color:"success",disabled:!n.length>0},s.a.createElement(Xe.a,{style:{paddingBottom:"3px"}})," Save & Continue"))))}}]),t}(s.a.Component),Rn=Object(te.a)(Object(f.b)(function(e){return{questions:e.questionEditor,selectedQuestion:e.selectedQuestion}},qn)(_n));_n.defaultProps={selectedQuestion:null};var Dn=n(161),Pn=n.n(Dn),Mn=function(e){var t=e.title,n=e.question,a=e.selectedAnswersIdx,r=void 0===a?[]:a,o=(e.onClickAnswer,e.disabled),i=e.countedAnswers,c=e.children,l=e.toggleSelectedAnswers,u=e.onSendAnswers,d=(e.isServer,e.toggleDisabled);return s.a.createElement(ve,{title:t,badge:n.progress,footer:c},n.text&&s.a.createElement("div",{className:"text-center my-5 h4",dangerouslySetInnerHTML:{__html:n.text}}),n.answers&&n.answers.map(function(e,t){return s.a.createElement(ie.a,{outline:!r[t],id:t,key:e.id,block:!0,onClick:function(e){var t=parseInt(e.target.id,10);l(t),Se.info("Sending single answer ",t),u([t]),d()},color:"secondary",disabled:o},e.text,i&&s.a.createElement(de.a,{className:"float-right",style:{lineHeight:1.5},color:"secondary"},"number"===typeof i[t]&&i[t]))}))},Fn=function(e){var t=e.title,n=e.question,a=e.selectedAnswersIdx,r=void 0===a?[]:a,o=(e.onClickAnswer,e.disabled),i=e.countedAnswers,c=e.children,l=e.toggleSelectedAnswers,u=e.onSendAnswers,d=e.isServer,m=e.toggleDisabled;return s.a.createElement(ve,{title:t,badge:n&&n.progress,footer:s.a.createElement(s.a.Fragment,null,"multi"===n.mode&&!d&&s.a.createElement(s.a.Fragment,null,s.a.createElement("p",{className:"text-center text-muted"},"Multiple choice question: Select answers and click send."),s.a.createElement(ie.a,{color:"primary",disabled:o,onClick:function(){var e,t=(e=r)?e.map(function(e,t){return e&&t}).filter(function(e){return"number"===typeof e}):[];Se.info("Sending multi answer ",t),u(t),m()},block:!0},"Send Answers")),c)},n.text&&s.a.createElement("div",{className:"text-center my-5 h4",dangerouslySetInnerHTML:{__html:n.text}}),n.answers&&n.answers.map(function(e,t){return s.a.createElement(ie.a,{outline:!r[t],id:t,key:e.id,block:!0,onClick:function(e){var t=parseInt(e.target.id,10);l(t),Se.info("Toggling multi answer ",t)},color:"secondary",disabled:o},e.text,i&&s.a.createElement(de.a,{className:"float-right",style:{lineHeight:1.5},color:"secondary"},"number"===typeof i[t]&&i[t]))}))},Wn=function(e){var t=e.question,n=e.isServer?"Ask Question":"Answer Question";return console.log("Props Question Card",e),s.a.createElement(s.a.Fragment,null,s.a.createElement(m.Helmet,null,s.a.createElement("title",null,n)),"single"===t.mode?s.a.createElement(Mn,Object.assign({title:n,question:t},e)):s.a.createElement(Fn,Object.assign({title:n,question:t},e)))};Wn.defaultProps={question:Qn};var Jn=Wn,Un=n(162),Hn=n.n(Un),Bn=n(163),zn=n.n(Bn),Ln=n(164),Gn=n.n(Ln),Vn=function(e){return e.server.connections.length>0},Xn=function(e){var t=e.questionEditor,n=void 0===t?[]:t,a=e.server.currentQuestionIdx;return(void 0===a?0:a)+1<n.length},Yn=function(e){var t=e.server.currentQuestionIdx;return!((void 0===t?0:t)-1<0)},$n={sendCurrentQuestionToClients:function(){return function(e,t){var n=t().server.connections,a=qe(t()),r={type:"question",payload:a};n.length>0&&a?(Se.info("Sending question to clients",a),n.forEach(function(e){return e.send(JSON.stringify(r))})):Se.error("Can't send question to clients")}},toggleAcceptingAnswers:function(){return{type:Be}},stopAcceptingConnections:function(){return function(e,t){var n=t(),a=n.connection.peer,r=void 0===a?null:a;n.server.acceptingConnections&&(e({type:ze}),r.disconnect())}},incrementQuestionIdx:He},Kn=function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(j.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={buttonPhase:0},n.nextButtonPhase=function(){n.state.buttonPhase>0&&n.setState(function(e){return{buttonPhase:(e.buttonPhase+1)%4}})},n}return Object(k.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.toggleAcceptingAnswers,a=t.stopAcceptingConnections,r=t.sendCurrentQuestionToClients,o=t.incrementQuestionIdx,i=t.hasNextQuestion,c={0:{text:s.a.createElement(s.a.Fragment,null,s.a.createElement(ce.a,{size:"sm"})," Waiting for clients"),color:"primary",additionalButtonProps:{outline:!0,disabled:!0}},1:{onClick:function(){a(),n(),r(),e.nextButtonPhase()},text:s.a.createElement(s.a.Fragment,null,s.a.createElement(Hn.a,{style:{paddingBottom:"3px"}})," Start Quiz"),color:"primary"},2:{onClick:function(){n(),e.nextButtonPhase()},text:s.a.createElement(s.a.Fragment,null,s.a.createElement(zn.a,{style:{paddingBottom:"3px"}})," Stop Question"),color:"primary"},3:{onClick:function(){o(),e.nextButtonPhase()},text:s.a.createElement(s.a.Fragment,null,s.a.createElement(Gn.a,{style:{paddingBottom:"3px"}})," Next Question"),color:"secondary",additionalButtonProps:{disabled:!i}}}[this.state.buttonPhase];return s.a.createElement(ie.a,Object.assign({color:c.color,outline:c.outline,block:!0,onClick:c.onClick},c&&c.additionalButtonProps&&c.additionalButtonProps),c.text)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.isConnected&&0===t.buttonPhase?{buttonPhase:1}:null}}]),t}(s.a.Component),Zn=Object(f.b)(function(e){return{isConnected:Vn(e),hasNextQuestion:Xn(e)}},$n)(Kn),ea=n(23),ta=function(e){var t=e.server.currentQuestionIdx,n=e.registeredAnswers;return n.length>0&&"undefined"!==typeof t?n[t].map(function(e){return e.length}):[]},na=function(e){var t=e.server.connections,n=void 0===t?[]:t,a=e.registeredAnswers.flat(2),r=Object(ea.a)(new Set(a)).length,o=n.length;if(0===o)return null;var s=Math.trunc(r/o*100),i=Number.isNaN(s)?"":"(".concat(s,"%)");return"".concat(r,"/").concat(o," ").concat(i)},aa=n(165),ra=n.n(aa),oa=n(166),sa=n.n(oa),ia=function(e){var t=e.onClick,n=e.disabled;return s.a.createElement("div",{className:"text-right align-middle",onClick:n?null:t},s.a.createElement(sa.a,{className:"chevron ".concat(n?"disabled":"enabled"),size:42}))},ca=function(e){var t=e.onClick,n=e.disabled;return s.a.createElement("div",{className:"text-left align-middle",onClick:n?null:t},s.a.createElement(ra.a,{className:"chevron ".concat(n?"disabled":"enabled"),size:42}))},la=function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(j.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={showVoteCount:!1},n.toggleShowVoteCount=function(){n.setState(function(e){return{showVoteCount:!e.showVoteCount}})},n}return Object(k.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props,t=e.currentQuestion,n=e.countedAnswers,a=e.receivedAnswersCounter,r=e.hasNextQuestion,o=e.hasPreviousQuestion,i=e.incrementQuestionIdx,c=e.decrementQuestionIdx,l=this.state.showVoteCount;return s.a.createElement(y.a,{className:"justify-content-center"},s.a.createElement(w.a,{xs:"2",className:"align-self-center"},s.a.createElement(ia,{disabled:!o,onClick:function(){return c()}})),s.a.createElement(Jn,{question:t,countedAnswers:l&&n,isServer:!0,disabled:!0},s.a.createElement(s.a.Fragment,null,a&&s.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center mb-2"},s.a.createElement("div",{className:"text-muted"},a," users have answered"),s.a.createElement(ie.a,{size:"sm",outline:!l,onClick:this.toggleShowVoteCount},s.a.createElement(Pn.a,{style:{paddingBottom:"3px"}})," ",l?"Hide":"Show"," Results")),s.a.createElement(Zn,null))),s.a.createElement(w.a,{xs:"2",className:"align-self-center"},s.a.createElement(ca,{disabled:!r,onClick:function(){return i()}})))}}]),t}(s.a.Component),ua={incrementQuestionIdx:He,decrementQuestionIdx:function(){return function(e,t){var n=t().server.currentQuestionIdx;e(Ue((void 0===n?0:n)-1))}}},da=Object(f.b)(function(e){return{currentQuestion:Qe(e),countedAnswers:ta(e),receivedAnswersCounter:na(e),hasPreviousQuestion:Yn(e),hasNextQuestion:Xn(e)}},ua)(Object(te.a)(la)),ma=n(40),pa=n.n(ma),fa=function(e,t,n){return e.map(function(e,a){return t===a?n(e):e})},Ea=function(e,t,n){e&&e.splice(n,0,e.splice(t,1)[0])},va=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{connections:[],ownServerId:"",currentQuestionIdx:0,acceptingAnswers:!1,acceptingConnections:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Je:return Object(ne.a)({},e,{currentQuestionIdx:t.payload.questionIdx<0?0:t.payload.questionIdx});case Pe:return Object(ne.a)({},e,{connections:[].concat(Object(ea.a)(e.connections),[t.payload.connection])});case Fe:return Object(ne.a)({},e,{ownServerId:t.payload.newId});case Be:return Object(ne.a)({},e,{acceptingAnswers:!e.acceptingAnswers});case ze:return Object(ne.a)({},e,{acceptingConnections:!e.acceptingConnections});default:return e}},ha=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case je:return t.payload.array;case Ae:var n=t.payload,a=n.answerIdxArray,r=n.questionIdx,o=n.userId;return fa(e,r,function(e){return e.map(function(e,t){return a.includes(t)?[].concat(Object(ea.a)(e),[o]):e})});default:return e}},ga=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{peer:null,status:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Oe:return Object(ne.a)({},e,{status:t.payload.newStatus});case xe:return Object(ne.a)({},e,{peer:t.payload.peer});default:return e}},ba=Object(E.combineReducers)({registeredAnswers:ha,connection:ga,server:va,questionEditor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case en:var n=JSON.parse(JSON.stringify(e)),a=e.length;return n.push(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{id:pa()(6),type:"question",mode:"single",text:"<p>New question</p>",questionIdx:e,answers:[{id:pa()(6),text:"Answer A",isCorrect:!0},{id:pa()(6),text:"Answer B",isCorrect:!1}]}}(a)),n;case nn:var r=t.payload,o=r.questionIdx,s=r.text,i=JSON.parse(JSON.stringify(e));return i[o]=Object(ne.a)({},i[o],{text:s}),i;case rn:var c=t.payload,l=c.questionIdx,u=c.newMode,d=JSON.parse(JSON.stringify(e)),m=!1;return d[l]=Object(ne.a)({},d[l],{answers:e[l].answers.map(function(e){return e.isCorrect&&!m?(m=!0,Object(ne.a)({},e,{isCorrect:!0})):Object(ne.a)({},e,{isCorrect:!1})}),mode:u}),d;case sn:var p=t.payload,f=p.questionIdx,E=p.newType,v=p.oldType,h=JSON.parse(JSON.stringify(e));return h[f]=Object(ne.a)({},h[f],{answers:e[f].answers.map(function(e){return Object(ne.a)({},e,{isCorrect:!1})}),type:E}),"question"===E&&"vote"===v&&(h[f].answers[0].isCorrect=!0),h;case ln:var g=JSON.parse(JSON.stringify(e));return[].concat(Object(ea.a)(g.slice(0,t.payload.questionIdx)),Object(ea.a)(g.slice(t.payload.questionIdx+1)));case Cn:var b=t.payload,y=b.questionIdx,w=b.answerIdx,S=JSON.parse(JSON.stringify(e));return fa(S,y,function(e){return Object(ne.a)({},e,{answers:(t=e.answers,n=w,t.filter(function(e,t){return n!==t}))});var t,n});case Sn:var x=t.payload.questionIdx,O=JSON.parse(JSON.stringify(e));return O[x]=Object(ne.a)({},e[x],{answers:[].concat(Object(ea.a)(e[x].answers),[{id:pa()(6),text:"New answer",isCorrect:!1}])}),O;case On:var I=t.payload,C=I.questionIdx,A=I.text,N=I.answerIdx,j=JSON.parse(JSON.stringify(e));return fa(j,C,function(e){return Object(ne.a)({},e,{answers:fa(e.answers,N,function(e){return Object(ne.a)({},e,{text:A})})})});case gn:var T=t.payload,k=T.questionIdx,Q=T.answerIdx,q=JSON.parse(JSON.stringify(e)),_=q[k].answers.map(function(e,t){return t===Q?Object(ne.a)({},e,{isCorrect:!0}):Object(ne.a)({},e,{isCorrect:!1})});return q[k].answers=_,q;case yn:var R=t.payload,D=R.questionIdx,P=R.answerIdx,M=JSON.parse(JSON.stringify(e)),F=M[D].answers.map(function(e,t){return t===P?Object(ne.a)({},e,{isCorrect:!e.isCorrect}):e});return M[D].answers=F,M;case dn:return t.payload.newQuestions;case vn:var W=t.payload,J=W.newQuestionIdx,U=W.oldQuestionIdx,H=JSON.parse(JSON.stringify(e));return Ea(H,U,J),H.map(function(e,t){return Object(ne.a)({},e,{questionIdx:t})});case Nn:var B=t.payload,z=B.questionIdx,L=B.newAnswerIdx,G=B.oldAnswerIdx,V=JSON.parse(JSON.stringify(e));return Ea(V[z].answers,G,L),V;default:return e}},selectedQuestion:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Kt:return t.payload.questionIdx;default:return e}}}),ya=Object(E.createStore)(ba,Object(h.composeWithDevTools)(Object(E.applyMiddleware)(v.a))),wa=function(){return s.a.createElement("div",null,s.a.createElement(f.a,{store:ya},s.a.createElement(s.a.Fragment,null,s.a.createElement(ee,null),s.a.createElement(p.a,null,s.a.createElement(d.a,{exact:!0,path:"/server/create",component:Ge}),s.a.createElement(d.a,{exact:!0,path:"/server/editor",component:Rn}),s.a.createElement(d.a,{exact:!0,path:"/server/ask",component:da}),s.a.createElement(S,null)))))},Sa="ADD_CONNECTION",xa="SET_REMOTE_SERVER_ID",Oa="SET_CURRENT_QUESTION";function Ia(e){return{type:Sa,payload:{connection:e}}}var Ca=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{connection:null,remoteServerId:"",currentQuestion:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Sa:return Object(ne.a)({},e,{connection:t.payload.connection});case xa:return Object(ne.a)({},e,{remoteServerId:t.payload.newId});case Oa:return Object(ne.a)({},e,{currentQuestion:t.payload.newQuestion});default:return e}},Aa=Object(E.combineReducers)({connection:ga,client:Ca}),Na=Object(f.b)(function(e){return{status:e.connection.status}})(function(e){return s.a.createElement(Z,Object.assign({isClient:!0},e))}),ja={title:"Connect to Server",text:"Please enter a valid Server ID. You should receive this ID from your instructor.",buttonText:"Connect",location:"/client/answer",validationError:"Only alphanumeric characters and '-','_' or spaces are allowed."},Ta=Object(f.b)(function(e){return{serverId:e.client.remoteServerId,connectionStatus:e.connection.status}},function(e){return{onChangeServerId:function(t){return e({type:xa,payload:{newId:t}})},onClickConnect:function(){return e(function(){var e=Object(we.a)(ye.a.mark(function e(t,n){var a,r,o,s,i,c,l,u;return ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=function(){return(l=Object(we.a)(ye.a.mark(function e(t){return ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){t.on("open",function(){Se.info("Successfully connected to server"),t.on("data",function(e){return i(e)}),e()}),s.on("error",function(e){return n(e)})}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)},c=function(e){return l.apply(this,arguments)},a=n(),r=a.client.remoteServerId,o=void 0===r?null:r,s=De(),i=function(e){var n=JSON.parse(e),a=n.type,r=n.payload;switch(Se.info("Received Data: ",n),a){case"question":t({type:Oa,payload:{newQuestion:r}});break;default:Se.error("ERROR: Client Data Handler Default Case")}},t(Ce(s)),u=s.connect(o,{reliable:!1}),t(Ia(u)),t(Ie(1)),e.next=11,c(u);case 11:t(Ie(2)),s.on("error",function(e){Se.error("ERROR: ",e),t(Ie(3))});case 13:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}())}}})(function(e){return s.a.createElement(y.a,{className:"justify-content-center"},s.a.createElement(ge,Object.assign({},e,ja)))}),ka=function(e){var t=e.title,n=e.text;return s.a.createElement(s.a.Fragment,null,s.a.createElement(m.Helmet,null,s.a.createElement("title",null,t)),s.a.createElement(ve,{title:t},s.a.createElement("div",{className:"d-flex flex-column justify-content-center"},s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement(ce.a,{size:"lg"})),n&&s.a.createElement("div",{style:{textAlign:"center"},className:"mt-4 text-muted"},n))))};ka.defaultProps={title:"Waiting"};var Qa=ka,qa=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(j.a)(this,Object(T.a)(t).call(this,e))).toggleSelectedAnswers=function(e){n.setState(function(t){var n=t.selectedAnswersIdx;return Object(ne.a)({},t,{selectedAnswersIdx:fa(n,e,function(e){return!e})})})},n.toggleDisabled=function(){n.setState(function(e){return{disabled:!e.disabled}})},n.initialState={disabled:!1,selectedAnswersIdx:[]},n.state=n.initialState,n}return Object(k.a)(t,e),Object(N.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.currentQuestion;t!==e.currentQuestion&&(this.resetState(),this.initSelectedAnswers(t.answers.length))}},{key:"resetState",value:function(){this.setState(this.initialState)}},{key:"initSelectedAnswers",value:function(e){this.setState({selectedAnswersIdx:Array(e).fill(!1)})}},{key:"render",value:function(){var e=this.props,t=e.currentQuestion,n=e.onSendAnswers,a=this.state,r=a.disabled,o=a.selectedAnswersIdx,i=Object.keys(t).length>0,c={question:t,disabled:r,selectedAnswersIdx:o,toggleSelectedAnswers:this.toggleSelectedAnswers,toggleDisabled:this.toggleDisabled,onSendAnswers:n};return s.a.createElement(y.a,{className:"justify-content-center"},i?s.a.createElement(Jn,c):s.a.createElement(Qa,{title:"Waiting For Question From Server",text:"You're connected to the server, but the Quiz Session has not been started yet."}))}}]),t}(s.a.Component);qa.defaultProps={currentQuestion:Qn};var _a=Object(f.b)(function(e){return{currentQuestion:e.client.currentQuestion}},function(e){return{onSendAnswers:function(t){return e(function(e){return function(t,n){var a=n().client,r=a.connection,o=void 0===r?null:r,s=a.currentQuestion,i=void 0===s?null:s;if(o&&i&&"undefined"!==typeof e){var c={type:"answer",payload:{questionIdx:i.questionIdx,answerIdxArray:e,userId:o.provider.id}};o.send(c)}}}(t))}}})(qa),Ra=Object(E.createStore)(Aa,Object(h.composeWithDevTools)(Object(E.applyMiddleware)(v.a))),Da=function(){return s.a.createElement("div",null,s.a.createElement(f.a,{store:Ra},s.a.createElement(s.a.Fragment,null,s.a.createElement(Na,null),s.a.createElement(p.a,null,s.a.createElement(u.a,null,s.a.createElement(d.a,{exact:!0,path:"/client/connect/:serverId?",component:Ta}),s.a.createElement(d.a,{exact:!0,path:"/client/answer",component:_a})),s.a.createElement(S,null)))))},Pa=n(167),Ma=(n(519),function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(Z,null),s.a.createElement(p.a,null,s.a.createElement(y.a,null,s.a.createElement(w.a,{md:"12"},s.a.createElement(le.a,{className:"shadow-none"},s.a.createElement(ue.a,null,s.a.createElement("h6",{className:"my-0"},"About")),s.a.createElement(me.a,null,s.a.createElement("div",{className:"markdown-body",style:{fontFamily:"IBM Plex Sans"},dangerouslySetInnerHTML:{__html:Object(Pa.a)('## What is Weclare?\n\nWeclare is an acronym for "**we**b based **cla**ssroom **re**sponse system".  \n\nIt is the prototype(!) of a classroom response system specifically designed for the use in computer science education at the university level. \n\nWeclare was designed to fulfill these high-level requirements:\n\n- Web based (no downloads necessary for both involved parties)\n- Interactive code execution of Java code snippets in the browser (running a JVM in the browser)\n- Peer-to-Peer design: No or minimal (only for signalling) server interaction required (based on WebRTC)\n- Good formatting options for code snippets (Syntax Highlighting)\n\n## What is a classroom response system?\n\nA CRS is a special case of an "Audience Response System" directed towards class room use in universities or schools. It allows an instructor to direct questions at the audience (students), which they can then interactively answer. CRS can exist as dedicated hardware systems (think of little remote boxes with buttons on them). But nowadays CRS are mostly software systems that can be used with many devices like computers, tablets or smartphones.\n\n## What is the motivation behind the creation of Weclare?\n\nWeclare is the result of a bachelor thesis by Moritz St\xfcckler at HAW Hamburg. It is heavily inspired by an existing system called ["StuReSy" made by another student at the University of Hamburg](https://github.com/sturesy).  \n\nHowever today, StuReSy seems unnecessarily complicated. It needs a dedicated server component and a Java Client to be configured when creating questions. Also it lacks a lot of computer science specific features (formatting source code fragments, syntax highlighting, etc).\n')}}))))),s.a.createElement(S,null)))}),Fa=function(e){var t=e.header,n=e.text,a=e.children,r=e.emoji;return s.a.createElement("div",null,s.a.createElement(le.a,{className:"shadow-none"},s.a.createElement(ue.a,null,s.a.createElement("h4",{className:"my-0"},t)),s.a.createElement(me.a,null,s.a.createElement(pe.a,null,s.a.createElement("span",{role:"img","aria-label":"Student",className:"d-block",style:{fontSize:"4em"}},r),s.a.createElement("span",null,n)),a)))};Fa.defaultProps={header:"",text:"",children:"",emoji:""};var Wa=Fa,Ja=function(){return s.a.createElement(p.a,null,s.a.createElement("div",{className:"pricing-header px-3 py-5 mx-auto text-center mt-5"},s.a.createElement("h1",{className:"display-3 font-weight-bold text-dark"},"Weclare"),s.a.createElement("p",{className:"lead"},"A web based, peer-to-peer classroom response system, tailored to computer science education at university level.")),s.a.createElement(y.a,null,s.a.createElement(w.a,{sm:"6"},s.a.createElement("div",{className:"card-deck mb-3 text-center"},s.a.createElement(Wa,{header:"For Students",text:"Start the client app, which allows you to connect to an existing session and answer questions.",emoji:"\ud83d\udc69\u200d\ud83c\udf93"},s.a.createElement(ie.a,{tag:x.a,to:"/client/connect",size:"lg",block:!0,outline:!0,color:"primary"},"Join Quiz Session")))),s.a.createElement(w.a,{sm:"6"},s.a.createElement("div",{className:"card-deck mb-3 text-center"},s.a.createElement(Wa,{header:"For Instructors",text:"Start the server app, which allows you to create new question sets and accept connections from students.",emoji:"\ud83d\udc69\u200d\ud83c\udfeb"},s.a.createElement(ie.a,{tag:x.a,to:"/server/editor",size:"lg",block:!0,outline:!0,color:"primary"},"Create Quiz Session"))))),s.a.createElement(S,null))},Ua=(n(521),function(){return s.a.createElement(l.a,{basename:""},s.a.createElement("div",{className:"App"},s.a.createElement(m.Helmet,{titleTemplate:"Weclare | %s",defaultTitle:"Weclare \u2013 A web based classroom response system"}),s.a.createElement(u.a,null,s.a.createElement(d.a,{path:"/",exact:!0,component:Ja}),s.a.createElement(d.a,{path:"/server",component:wa}),s.a.createElement(d.a,{path:"/client",component:Da}),s.a.createElement(d.a,{path:"/about",component:Ma}))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(Ua,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},89:function(e,t,n){e.exports=n(523)}},[[89,2,1]]]);
//# sourceMappingURL=main.6da792b3.chunk.js.map